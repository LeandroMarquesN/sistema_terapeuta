<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Agendar Consulta</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Arquivos css -->
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/animacaoBack.css">
</head>
<body class="menosClaro">
  <div class="container mt-5">
    <h2 class="mb-4">Agendamento de Consulta</h2>

    <form class="row g-3" id="formAgendamento" enctype="multipart/form-data">

      <!-- Dados do paciente -->
      <div class="col-md-6">
        <label class="form-label">Nome do Paciente</label>
        <input type="text" name="nome" class="form-control" required>
      </div>

      <div class="col-md-3">
        <label class="form-label">Data de Nascimento</label>
        <input type="date" name="data_nascimento" class="form-control" required>
      </div>

      <div class="col-md-3">
        <label class="form-label">Idade</label>
        <input type="number" name="idade" class="form-control" required>
      </div>

      <div class="col-md-4">
        <label class="form-label">Peso (kg)</label>
        <input type="number" name="peso" step="0.1" class="form-control">
      </div>

      <div class="col-md-4">
        <label class="form-label">Altura (cm)</label>
        <input type="number" name="altura" step="0.1" class="form-control">
      </div>

      <div class="col-md-4">
        <label class="form-label">Tipo Sanguíneo</label>
        <select class="form-select" name="tipo_sanguineo">
          <option value="">Selecione</option>
          <option>A+</option><option>A-</option>
          <option>B+</option><option>B-</option>
          <option>AB+</option><option>AB-</option>
          <option>O+</option><option>O-</option>
        </select>
      </div>

      <!-- Dados da consulta -->
      <div class="col-md-6">
        <label class="form-label">Tipo de Terapia</label>
        <select class="form-select" name="tipo_terapia" required>
          <option value="">Escolha uma opção</option>
          <option>Terapia Clark</option>
          <option>Biofísica</option>
          <option>Ortomolecular</option>
          <option>Microscopia</option>
        </select>
      </div>

      <div class="col-md-6">
        <label class="form-label">Data e Hora</label>
        <input type="datetime-local" name="data" class="form-control" required>
      </div>

      <div class="col-12">
        <label class="form-label">Motivo da Consulta</label>
        <textarea class="form-control" name="motivo" rows="2"></textarea>
      </div>

      <div class="col-12">
        <label class="form-label">Como conheceu o consultório?</label>
        <select class="form-select" name="origem">
          <option>Indicação</option>
          <option>Instagram</option>
          <option>Google</option>
          <option>Facebook</option>
          <option>Outro</option>
        </select>
      </div>

      <!-- Histórico de Saúde -->
      <div class="col-12">
        <h5 class="mt-4">Condições de Saúde</h5>
        <div class="row">
          <div class="col-md-4">
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Hipertensão"><label class="form-check-label">Hipertensão</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Diabetes"><label class="form-check-label">Diabetes</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Resistência Insulínica"><label class="form-check-label">Resistência Insulínica</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Hipotireoidismo"><label class="form-check-label">Hipotireoidismo</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Problemas Cardíacos"><label class="form-check-label">Problemas Cardíacos</label></div>
          </div>
          <div class="col-md-4">
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Neurológico"><label class="form-check-label">Neurológico</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Disfunção Hepática"><label class="form-check-label">Disfunção Hepática</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Renal"><label class="form-check-label">Problemas Renais</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="TDAH"><label class="form-check-label">TDAH</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="TEA"><label class="form-check-label">TEA (Espectro Autista)</label></div>
          </div>
          <div class="col-md-4">
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Fibromialgia"><label class="form-check-label">Fibromialgia</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Ansiedade"><label class="form-check-label">Ansiedade</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Depressão"><label class="form-check-label">Depressão</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Autoimune"><label class="form-check-label">Doença Autoimune</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Alergias"><label class="form-check-label">Alergias</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Remedios"><label class="form-check-label">Remedios</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Suplementos"><label class="form-check-label">Suplementos</label></div>
            <div class="form-check"><input type="checkbox" class="form-check-input" name="condicoes[]" value="Vitaminas"><label class="form-check-label">Vitaminas</label></div>
          </div>
        </div>
      </div>

      <!-- Upload de arquivo -->
      <div class="col-12 mt-4">
        <label class="form-label">Anexar Exames ou Imagens (opcional)</label>
        <input type="file" name="anexo" class="form-control">
      </div>

      <!-- Botão de envio -->
      <div class="col-12 text-end">
        <button type="submit" class="btn btn-primary mt-3">Salvar Agendamento</button>
      </div>
    </form>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById('formAgendamento').addEventListener('submit', async function (e) {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);

      const response = await fetch('/api/agendamentos', {
        method: 'POST',
        body: formData
      });

      if (response.ok) {
        alert('Agendamento salvo com sucesso!');
        form.reset();
      } else {
        alert('Erro ao salvar agendamento.');
      }
    });
  </script>

</body>
</html>
